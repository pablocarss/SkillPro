// MinIO Configuration for File Storage
// Uncomment and configure when ready to use MinIO for storing files (videos, PDFs, etc.)

/*
import { Client } from 'minio';

const minioClient = new Client({
  endPoint: process.env.MINIO_ENDPOINT || 'localhost',
  port: parseInt(process.env.MINIO_PORT || '9000'),
  useSSL: process.env.MINIO_USE_SSL === 'true',
  accessKey: process.env.MINIO_ACCESS_KEY || '',
  secretKey: process.env.MINIO_SECRET_KEY || '',
});

const BUCKET_NAME = process.env.MINIO_BUCKET || 'skillpro';

// Initialize bucket if it doesn't exist
export async function initializeBucket() {
  try {
    const exists = await minioClient.bucketExists(BUCKET_NAME);
    if (!exists) {
      await minioClient.makeBucket(BUCKET_NAME, 'us-east-1');
      console.log(`Bucket ${BUCKET_NAME} created successfully`);
    }
  } catch (error) {
    console.error('Error initializing MinIO bucket:', error);
  }
}

// Upload file to MinIO
export async function uploadFile(
  file: Buffer,
  fileName: string,
  contentType: string
): Promise<string> {
  try {
    await minioClient.putObject(
      BUCKET_NAME,
      fileName,
      file,
      file.length,
      {
        'Content-Type': contentType,
      }
    );

    // Generate presigned URL (valid for 7 days)
    const url = await minioClient.presignedGetObject(
      BUCKET_NAME,
      fileName,
      7 * 24 * 60 * 60
    );

    return url;
  } catch (error) {
    console.error('Error uploading file to MinIO:', error);
    throw error;
  }
}

// Get file URL from MinIO
export async function getFileUrl(fileName: string): Promise<string> {
  try {
    const url = await minioClient.presignedGetObject(
      BUCKET_NAME,
      fileName,
      7 * 24 * 60 * 60
    );
    return url;
  } catch (error) {
    console.error('Error getting file URL from MinIO:', error);
    throw error;
  }
}

// Delete file from MinIO
export async function deleteFile(fileName: string): Promise<void> {
  try {
    await minioClient.removeObject(BUCKET_NAME, fileName);
  } catch (error) {
    console.error('Error deleting file from MinIO:', error);
    throw error;
  }
}

// Usage examples:
//
// 1. Upload course video:
// const videoBuffer = await file.arrayBuffer();
// const videoUrl = await uploadFile(
//   Buffer.from(videoBuffer),
//   `courses/${courseId}/videos/${lessonId}.mp4`,
//   'video/mp4'
// );
//
// 2. Upload certificate PDF:
// const pdfUrl = await uploadFile(
//   pdfBuffer,
//   `certificates/${userId}/${courseId}.pdf`,
//   'application/pdf'
// );
//
// 3. Store lesson materials:
// const materialUrl = await uploadFile(
//   fileBuffer,
//   `courses/${courseId}/materials/${fileName}`,
//   contentType
// );

export default minioClient;
*/

export {};
